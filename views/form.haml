%html
  %head
    %meta{:name => 'viewport', :content => 'width=320', 'user-scalable' => 'no'}
    %title
      Beermongerer
    %link{:type => 'text/css', :rel => 'stylesheet', :media => 'screen', :href => '/styles/screen.css'}
    %link{:type => 'text/css', :rel => 'stylesheet', :media => 'screen', :href => '/styles/jquery.autocomplete.css'}
    %script{:type => 'text/javascript', :src => 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'}
    %script{:type => 'text/javascript', :src => 'http://dev.jquery.com/view/trunk/plugins/autocomplete/jquery.autocomplete.js'}
  %body
    #page
      %p
        //%img{:src => '/images/beers.png'}
      %h1
        The Beermongerer
      - if @data
        %form
          %input{:type => :text, :id => :query}
      - else
        %p
          %strong
            Data not found. Whoops.
      #footer
        %p
          This is an index of beers stocked by
          %a{:href => 'http://thebeermongers.com', :title => 'The Beermongers'}>= ' The Beermongers'
          , a bottle shop in Portland Oregon. It should make searching their stock easier, but it's only updated once per day&mdash;so follow the links to each beer's page at
          %a{:href => 'http://thebeermongers.com', :title => 'The Beermongers'}= ' thebeermongers.com'
          to find the freshest data. Only beer names (including the brewery names) are indexed&mdash;not their descriptions&mdash;so this works best if you're looking for a specific bottle or common label.
          %br/
          %br/
          Made by
          %a{:href => 'http://deraill.com', :title => 'Deraill :: Simple things by a simple boy'}>= ' Deraill'
          \.
          %a{:href => 'http://thebeermongers.com', :title => 'The Beermongers'} The Beermongers
          do not run or endorse this site.
          - if @last_modified
            %br/
            %br/
            %em
              Last indexed:
              = @last_modified.strftime("%A, %B %d at %I:%M %p")
      %script
        = "var data = #{@data};"
        $("#query").autocomplete(data, {
        matchContains: true,
        formatItem: function(item) {
        return item.text;
        }
        }).result(function(event, item) {
        location.href = item.url;
        });
